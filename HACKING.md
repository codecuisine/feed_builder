# Running the code directly

If you want to run the code directly and tinker with the code without installing the docker container, first install the python requirements

sudo pip install -r requirements.txt

make the folder for the data

sudo mkdir /var/production/
sudo chmod a+rwx /var/production/

sudo mkdir /opt/feed/
sudo chmod a+rwx /opt/feed/

export the approperiate enviornemental variable:

export OCID_KEY="test"; export TWILIO_SID="test"; export TWILIO_TOKEN="test";

cd stich
python 

# Sitch Canada Specific Instructions:
## How to update feeds for sensor.
### Putting files up on a server;
First you need the state files. It can be generated by 

    cd /path/to/sitch/feed_builder/sitch
    python runner-canada.py

    It generates the feed in /var/production or somethig bunch of gz 
    file put them online

    scp /var/production/*.csv.gz  yourserver:/var/www/html/sitch-canada-feeds/

Then you need the mmc files. Canada's code is 302 so we need to get this file from the original sitch feed repo and 
    put it online.

    form here
    https://github.com/sitch-io/sensor_feed/tree/master/feed
    
    download 
    
    wget https://github.com/sitch-io/sensor_feed/blob/master/feed/302.csv.gz?raw=true
    mv 302.csv.gz?raw=true 302.csv.gz

    upload it to the server
    
### run the sensor code and test
- setup the environmental varialbles

    source env-var-ca.sh

- Install the required packages
    pacman -S expect logrotate gpsd kmod lshw fftw3 tcl

- copy the files
    sudo cp binaries/kal-linux-arm /usr/local/bin/
    sudo cp binaries/filebeat-linux-arm /usr/local/bin
    sudo mkdir -p /etc/templates
    sudo cp configs/filebeat.json /etc/templates
    sudo mkdir /etc/schemas
    sudo cp configs/feed_db_translation.yaml /etc/schemas
    sudo cp configs/feed_db_schema.yaml /etc/schemas

- run the sensor
    cd senser
    python sitch/runner.py

